{"version":3,"sources":["webpack:///./images/bg/balcony.jpg","webpack:///./images/bg/hall.jpg","webpack:///./images/bg/bedroom.jpg","webpack:///./images/woman/body/body_1.png","webpack:///./images/woman/body/body_2.png","webpack:///./images/woman/hair/hair_1.png","webpack:///./images/woman/hair/hair_2.png","webpack:///./images/woman/hair/hair_1_back.png","webpack:///./images/woman/hair/hair_2_back.png","webpack:///./images/woman/clothes/clothes_1.png","webpack:///./images/woman/clothes/clothes_2.png","webpack:///./images/woman/emotions_white/default.png","webpack:///./images/woman/emotions_black/default.png","webpack:///./images/arrow.png","webpack:///./images/ellipse.png","webpack:///./images/ellipseA.png","webpack:///./services/person.js","webpack:///./images/man/body/body_1.png","webpack:///./images/man/hair/hair_1.png","webpack:///./images/man/hair/hair_1_back.png","webpack:///./images/man/clothes/clothes_1.png","webpack:///./images/woman/emotions_white/shy.png","webpack:///./images/woman/emotions_white/angry.png","webpack:///./images/woman/emotions_white/joy.png","webpack:///./images/woman/emotions_white/surprised.png","webpack:///./images/woman/emotions_white/sad.png","webpack:///./images/woman/emotions_black/shy.png","webpack:///./images/woman/emotions_black/angry.png","webpack:///./images/woman/emotions_black/joy.png","webpack:///./images/woman/emotions_black/surprised.png","webpack:///./images/woman/emotions_black/sad.png","webpack:///./images/man/emotions/default.png","webpack:///./scenes/dialog.js","webpack:///./scenes/customization.js","webpack:///./index.js","webpack:///./services/creators.js"],"names":["personConstructor","gender","personConfig","scene","scaleCoef","mainHeroX","mainHeroY","this","idx","body","create_body","hair_back","create_hair_back","hair","create_hair","clothes","create_clothes","face","create_face","stageNames","stageIdx","forEach","name","destroy","faceKey","color","setFlipX","title","mainPerson","secondPerson","secondPersonConfig","cameraPosition","moves","left","middle","right","readReplic","replicId","type","add","image","backgroundName","bgCoef","height","setScale","setOrigin","setDepth","cameras","main","scrollX","createTextBox","innerWidth","wrapWidth","fixedWidth","fixedHeight","start","text","character","createTitle","moveCam","innerHeight","emotion","changeFace","flipPerson","Phaser","Scene","super","key","active","load","balcony","hall","bedroom","arrow","ellipse","ellipseA","setBounds","position","camera","tweens","targets","ease","duration","repeat","yoyo","x","alpha","from","to","GetValue","Utils","Objects","y","config","textBox","rexUI","background","roundRectangle","setStrokeStyle","getBBcodeText","space","top","bottom","layout","setInteractive","on","isTyping","stop","isLastPage","endOfStory","typeNextPage","getTitleText","BBCodeText","fontSize","wrap","mode","width","maxLines","anchor","stageTitles","chooseText","tabs","setStage","i","bgImg","setPosition","make","flipX","changeOption","setX","length","clickBtn","remove","AUTO","parent","scale","Scale","FIT","autoCenter","CENTER_BOTH","defaultImage","plugins","plugin","mapping","game","Game","hairBackArr","woman","man","bodyArr","hairArr","clothesArr","faceColor","hair_back_Img","bodyImg","hair_Img","clothes_Img","console","log","face_Img","Tabs","setAlpha","buttons","button0","button1","button2","lastClickedIdx","setTexture","createNextBtn","callback","sbmtBtn","createSbmtBtn"],"mappings":"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","file":"main.d29e3124cc49352d7db1.js","sourcesContent":["export default __webpack_public_path__ + \"images/bg/balcony.jpg\";","export default __webpack_public_path__ + \"images/bg/hall.jpg\";","export default __webpack_public_path__ + \"images/bg/bedroom.jpg\";","export default __webpack_public_path__ + \"images/woman/body/body_1.png\";","export default __webpack_public_path__ + \"images/woman/body/body_2.png\";","export default __webpack_public_path__ + \"images/woman/hair/hair_1.png\";","export default __webpack_public_path__ + \"images/woman/hair/hair_2.png\";","export default __webpack_public_path__ + \"images/woman/hair/hair_1_back.png\";","export default __webpack_public_path__ + \"images/woman/hair/hair_2_back.png\";","export default __webpack_public_path__ + \"images/woman/clothes/clothes_1.png\";","export default __webpack_public_path__ + \"images/woman/clothes/clothes_2.png\";","export default __webpack_public_path__ + \"images/woman/emotions_white/default.png\";","export default __webpack_public_path__ + \"images/woman/emotions_black/default.png\";","export default __webpack_public_path__ + \"images/arrow.png\";","export default __webpack_public_path__ + \"images/ellipse.png\";","export default __webpack_public_path__ + \"images/ellipseA.png\";","const { personConstructor } = require('./creators.js');\r\n\r\nclass Person {\r\n  constructor(gender, personConfig, scene, scaleCoef, mainHeroX, mainHeroY) {\r\n    this.idx = 0;\r\n    this.gender = gender;\r\n    this.personConfig = personConfig;\r\n    this.scene = scene;\r\n    this.scaleCoef = scaleCoef;\r\n    this.mainHeroX = mainHeroX;\r\n    this.mainHeroY = mainHeroY;\r\n\r\n    this.body = personConstructor.create_body(\r\n      this.gender,\r\n      this.personConfig[0],\r\n      this.scene,\r\n      this.scaleCoef,\r\n      this.mainHeroX,\r\n      this.mainHeroY,\r\n    );\r\n\r\n    this.hair_back = personConstructor.create_hair_back(\r\n      this.gender,\r\n      this.personConfig[1],\r\n      this.scene,\r\n      this.scaleCoef,\r\n      this.mainHeroX,\r\n      this.mainHeroY,\r\n    );\r\n\r\n    this.hair = personConstructor.create_hair(\r\n      this.gender,\r\n      this.personConfig[1],\r\n      this.scene,\r\n      this.scaleCoef,\r\n      this.mainHeroX,\r\n      this.mainHeroY,\r\n    );\r\n\r\n    this.clothes = personConstructor.create_clothes(\r\n      this.gender,\r\n      this.personConfig[2],\r\n      this.scene,\r\n      this.scaleCoef,\r\n      this.mainHeroX,\r\n      this.mainHeroY,\r\n    );\r\n\r\n    this.face = personConstructor.create_face(\r\n      this.gender,\r\n      this.personConfig[3],\r\n      this.personConfig[0],\r\n      this.scene,\r\n      this.scaleCoef,\r\n      this.mainHeroX,\r\n      this.mainHeroY,\r\n    );\r\n  }\r\n\r\n  changeOption(stageNames, stageIdx) {\r\n    this.idx === 1 ? (this.idx = 0) : (this.idx = 1);\r\n    stageNames[stageIdx].forEach(name => {\r\n      if (name === 'body') {\r\n        this.face.destroy();\r\n        this.face = personConstructor.create_face(\r\n          this.gender,\r\n          this.personConfig[3],\r\n          this.idx,\r\n          this.scene,\r\n          this.scaleCoef,\r\n          this.mainHeroX,\r\n          this.mainHeroY,\r\n        );\r\n      }\r\n      this[name].destroy();\r\n      this[name] = personConstructor[`create_${name}`](\r\n        this.gender,\r\n        this.idx,\r\n        this.scene,\r\n        this.scaleCoef,\r\n        this.mainHeroX,\r\n        this.mainHeroY,\r\n      );\r\n    });\r\n  }\r\n\r\n  changeFace(faceKey, color) {\r\n    this.face.destroy();\r\n    this.face = personConstructor.create_face(\r\n      this.gender,\r\n      faceKey,\r\n      color,\r\n      this.scene,\r\n      this.scaleCoef,\r\n      this.mainHeroX,\r\n      this.mainHeroY,\r\n    );\r\n  }\r\n\r\n  destroyPerson() {\r\n    this.body.destroy();\r\n    this.hair_back.destroy();\r\n    this.hair.destroy();\r\n    this.clothes.destroy();\r\n    this.face.destroy();\r\n  }\r\n\r\n  flipPerson() {\r\n    this.body.setFlipX(true);\r\n    this.hair_back.setFlipX(true);\r\n    this.hair.setFlipX(true);\r\n    this.clothes.setFlipX(true);\r\n    this.face.setFlipX(true);\r\n  }\r\n}\r\nexport default Person;\r\n","export default __webpack_public_path__ + \"images/man/body/body_1.png\";","export default __webpack_public_path__ + \"images/man/hair/hair_1.png\";","export default __webpack_public_path__ + \"images/man/hair/hair_1_back.png\";","export default __webpack_public_path__ + \"images/man/clothes/clothes_1.png\";","export default __webpack_public_path__ + \"images/woman/emotions_white/shy.png\";","export default __webpack_public_path__ + \"images/woman/emotions_white/angry.png\";","export default __webpack_public_path__ + \"images/woman/emotions_white/joy.png\";","export default __webpack_public_path__ + \"images/woman/emotions_white/surprised.png\";","export default __webpack_public_path__ + \"images/woman/emotions_white/sad.png\";","export default __webpack_public_path__ + \"images/woman/emotions_black/shy.png\";","export default __webpack_public_path__ + \"images/woman/emotions_black/angry.png\";","export default __webpack_public_path__ + \"images/woman/emotions_black/joy.png\";","export default __webpack_public_path__ + \"images/woman/emotions_black/surprised.png\";","export default __webpack_public_path__ + \"images/woman/emotions_black/sad.png\";","export default __webpack_public_path__ + \"images/man/emotions/default.png\";","import scenario from '../ons2.json';\r\nimport { personConfig } from './customization.js';\r\nimport Person from '../services/person.js';\r\n\r\nimport arrowImg from '../images/arrow.png';\r\nimport ellipseImg from '../images/ellipse.png';\r\nimport ellipseAImg from '../images/ellipseA.png';\r\nimport balconyImg from '../images/bg/balcony.jpg';\r\nimport hallImg from '../images/bg/hall.jpg';\r\nimport bedroomImg from '../images/bg/bedroom.jpg';\r\nimport body_woman_1Img from '../images/woman/body/body_1.png';\r\nimport body_man_1Img from '../images/man/body/body_1.png';\r\nimport body_woman_2Img from '../images/woman/body/body_2.png';\r\nimport hair_woman_1Img from '../images/woman/hair/hair_1.png';\r\nimport hair_man_1Img from '../images/man/hair/hair_1.png';\r\nimport hair_woman_2Img from '../images/woman/hair/hair_2.png';\r\nimport hair_woman_1_backImg from '../images/woman/hair/hair_1_back.png';\r\nimport hair_man_1_backImg from '../images/man/hair/hair_1_back.png';\r\nimport hair_woman_2_backImg from '../images/woman/hair/hair_2_back.png';\r\nimport clothes_woman_1Img from '../images/woman/clothes/clothes_1.png';\r\nimport clothes_man_1Img from '../images/man/clothes/clothes_1.png';\r\nimport clothes_woman_2Img from '../images/woman/clothes/clothes_2.png';\r\nimport face_woman_w_defaultImg from '../images/woman/emotions_white/default.png';\r\nimport face_woman_w_shyImg from '../images/woman/emotions_white/shy.png';\r\nimport face_woman_w_angryImg from '../images/woman/emotions_white/angry.png';\r\nimport face_woman_w_joyImg from '../images/woman/emotions_white/joy.png';\r\nimport face_woman_w_surprisedImg from '../images/woman/emotions_white/surprised.png';\r\nimport face_woman_w_sadImg from '../images/woman/emotions_white/sad.png';\r\nimport face_woman_b_defaultImg from '../images/woman/emotions_black/default.png';\r\nimport face_woman_b_shyImg from '../images/woman/emotions_black/shy.png';\r\nimport face_woman_b_angryImg from '../images/woman/emotions_black/angry.png';\r\nimport face_woman_b_joyImg from '../images/woman/emotions_black/joy.png';\r\nimport face_woman_b_surprisedImg from '../images/woman/emotions_black/surprised.png';\r\nimport face_woman_b_sadImg from '../images/woman/emotions_black/sad.png';\r\nimport face_man_defaultImg from '../images/man/emotions/default.png';\r\n\r\nlet bgImg;\r\nvar title = null;\r\nlet textBox;\r\nlet replicId = 0;\r\nlet mainPerson = null;\r\nlet secondPerson = null;\r\nconst secondPersonConfig = [0, 0, 0, 'default'];\r\nlet cameraPosition = 150;\r\nconst moves = {\r\n  left: 0,\r\n  middle: 200,\r\n  right: 425,\r\n};\r\n\r\nconst readReplic = (replicId, scene) => {\r\n  if (scenario[replicId].type === 'background') {\r\n    // background change\r\n    bgImg = scene.add.image(0, 0, scenario[replicId].backgroundName);\r\n    const bgCoef = 667 / bgImg.height;\r\n    bgImg.setScale(bgCoef, bgCoef).setOrigin(0).setDepth(-1);\r\n    replicId += 1;\r\n\r\n    scene.cameras.main.scrollX = 200;\r\n\r\n    readReplic(replicId, scene);\r\n  } else {\r\n    // replica render\r\n    textBox = createTextBox(scene, innerWidth / 2 + 50, 500, {\r\n      wrapWidth: 260,\r\n      fixedWidth: 260,\r\n      fixedHeight: 65,\r\n    }).start(scenario[replicId].text, 50);\r\n\r\n    // create title to replica\r\n    if (scenario[replicId].character && title === null) {\r\n      title = createTitle(scene, innerWidth / 2, 490, {\r\n        fixedWidth: 70,\r\n        fixedHeight: 16,\r\n      }).start(scenario[replicId].character, 50);\r\n    }\r\n\r\n    // camera view change\r\n    if (\r\n      scenario[replicId].type !== cameraPosition &&\r\n      scenario[replicId].type !== 'background'\r\n    ) {\r\n      moveCam(scene, scenario[replicId].type);\r\n      cameraPosition = moves[scenario[replicId].type];\r\n    }\r\n\r\n    if (scenario[replicId].character) {\r\n      if (scenario[replicId].character === 'MAINHERO') {\r\n        // create person\r\n        if (mainPerson === null) {\r\n          mainPerson = new Person(\r\n            'woman',\r\n            personConfig,\r\n            scene,\r\n            0.3, //scaleCoef,\r\n            100, //X,\r\n            innerHeight / 2, //Y,\r\n          );\r\n        }\r\n\r\n        // emotion change\r\n        if (scenario[replicId].emotion) {\r\n          mainPerson.changeFace(scenario[replicId].emotion, personConfig[0]);\r\n        }\r\n      } else {\r\n        // create person\r\n        if (secondPerson === null) {\r\n          secondPerson = new Person(\r\n            'man',\r\n            secondPersonConfig,\r\n            scene,\r\n            0.3, //scaleCoef,\r\n            675, //X,\r\n            innerHeight / 2, //Y,\r\n          );\r\n        }\r\n\r\n        // emotion change\r\n        if (scenario[replicId].emotion) {\r\n          secondPerson.changeFace(\r\n            scenario[replicId].emotion,\r\n            secondPersonConfig[0],\r\n          );\r\n        }\r\n\r\n        secondPerson.flipPerson();\r\n      }\r\n    }\r\n    if (!scenario[replicId].character) {\r\n      if (title !== null) {\r\n        title.destroy();\r\n        title = null;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nclass Dialog extends Phaser.Scene {\r\n  constructor() {\r\n    super({\r\n      key: 'dialog',\r\n      active: true,\r\n    });\r\n  }\r\n\r\n  preload() {\r\n    this.load.image('balcony', balconyImg);\r\n    this.load.image('hall', hallImg);\r\n    this.load.image('bedroom', bedroomImg);\r\n    this.load.image('arrow', arrowImg);\r\n    this.load.image('ellipse', ellipseImg);\r\n    this.load.image('ellipseA', ellipseAImg);\r\n    this.load.image('body_woman_1', body_woman_1Img);\r\n    this.load.image('body_man_1', body_man_1Img);\r\n    this.load.image('body_woman_2', body_woman_2Img);\r\n    this.load.image('hair_woman_1', hair_woman_1Img);\r\n    this.load.image('hair_man_1', hair_man_1Img);\r\n    this.load.image('hair_woman_2', hair_woman_2Img);\r\n    this.load.image('hair_woman_1_back', hair_woman_1_backImg);\r\n    this.load.image('hair_man_1_back', hair_man_1_backImg);\r\n    this.load.image('hair_woman_2_back', hair_woman_2_backImg);\r\n    this.load.image('clothes_woman_1', clothes_woman_1Img);\r\n    this.load.image('clothes_man_1', clothes_man_1Img);\r\n    this.load.image('clothes_woman_2', clothes_woman_2Img);\r\n    this.load.image('face_woman_w_default', face_woman_w_defaultImg);\r\n    this.load.image('face_woman_w_shy', face_woman_w_shyImg);\r\n    this.load.image('face_woman_w_angry', face_woman_w_angryImg);\r\n    this.load.image('face_woman_w_joy', face_woman_w_joyImg);\r\n    this.load.image('face_woman_w_surprised', face_woman_w_surprisedImg);\r\n    this.load.image('face_woman_w_sad', face_woman_w_sadImg);\r\n    this.load.image('face_woman_b_default', face_woman_b_defaultImg);\r\n    this.load.image('face_woman_b_shy', face_woman_b_shyImg);\r\n    this.load.image('face_woman_b_angry', face_woman_b_angryImg);\r\n    this.load.image('face_woman_b_joy', face_woman_b_joyImg);\r\n    this.load.image('face_woman_b_surprised', face_woman_b_surprisedImg);\r\n    this.load.image('face_woman_b_sad', face_woman_b_sadImg);\r\n    this.load.image('face_man_default', face_man_defaultImg);\r\n  }\r\n\r\n  create() {\r\n    this.cameras.main.setBounds(0, 0, 825, innerHeight);\r\n    this.cameras.main.scrollX = cameraPosition;\r\n\r\n    readReplic(replicId, this);\r\n  }\r\n\r\n  update() {}\r\n}\r\n\r\nconst moveCam = (scene, position) => {\r\n  const camera = scene.cameras.main;\r\n  scene.tweens.add({\r\n    targets: camera,\r\n    scrollX: moves[position],\r\n    ease: 'Cubic', // 'Cubic', 'Elastic', 'Bounce', 'Back', Linear\r\n    duration: 1000,\r\n    repeat: 0,\r\n    yoyo: false,\r\n  });\r\n\r\n  textBox.x = moves[position] + 40;\r\n  scene.tweens.add({\r\n    targets: textBox,\r\n    alpha: { from: 0, to: 1 },\r\n    ease: 'Cubic', // 'Cubic', 'Elastic', 'Bounce', 'Back', Linear\r\n    duration: 1000,\r\n    repeat: 0,\r\n    yoyo: false,\r\n  });\r\n\r\n  if (title) {\r\n    title.x = moves[position] + 60;\r\n    scene.tweens.add({\r\n      targets: title,\r\n      alpha: { from: 0, to: 1 },\r\n      ease: 'Cubic', // 'Cubic', 'Elastic', 'Bounce', 'Back', Linear\r\n      duration: 1000,\r\n      repeat: 0,\r\n      yoyo: false,\r\n    });\r\n  }\r\n};\r\n\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\nconst createTextBox = function (scene, x, y, config) {\r\n  const wrapWidth = GetValue(config, 'wrapWidth', 0);\r\n  const fixedWidth = GetValue(config, 'fixedWidth', 0);\r\n  const fixedHeight = GetValue(config, 'fixedHeight', 0);\r\n  var textBox = scene.rexUI.add\r\n    .textBox({\r\n      x: x,\r\n      y: y,\r\n\r\n      background: scene.rexUI.add\r\n        .roundRectangle(0, 0, 2, 2, 20, 0xffffff)\r\n        .setStrokeStyle(12, 0xc62d6e),\r\n\r\n      text: getBBcodeText(scene, wrapWidth, fixedWidth, fixedHeight),\r\n\r\n      space: {\r\n        left: 20,\r\n        right: 20,\r\n        top: 20,\r\n        bottom: 20,\r\n      },\r\n    })\r\n    .setOrigin(0)\r\n    .layout()\r\n    .setDepth(6)\r\n    .setInteractive()\r\n    .on(\r\n      'pointerdown',\r\n      function () {\r\n        if (this.isTyping) {\r\n          this.stop(true);\r\n        } else {\r\n          if (this.isLastPage) {\r\n            this.destroy();\r\n\r\n            replicId += 1;\r\n            scenario[replicId]\r\n              ? readReplic(replicId, scene)\r\n              : endOfStory(scene);\r\n          } else {\r\n            this.typeNextPage();\r\n          }\r\n        }\r\n      },\r\n      textBox,\r\n    );\r\n\r\n  return textBox;\r\n};\r\n\r\nconst createTitle = function (scene, x, y, config) {\r\n  const fixedWidth = GetValue(config, 'fixedWidth', 0);\r\n  const fixedHeight = GetValue(config, 'fixedHeight', 0);\r\n  const title = scene.rexUI.add\r\n    .textBox({\r\n      x: x,\r\n      y: y,\r\n      background: scene.rexUI.add.roundRectangle(0, 0, 0, 0, 5, 0xc62d6e),\r\n      text: getTitleText(scene, fixedWidth, fixedHeight),\r\n      space: {\r\n        left: 5,\r\n        right: 5,\r\n        top: 3,\r\n        bottom: 3,\r\n      },\r\n    })\r\n    .setOrigin(0)\r\n    .layout()\r\n    .setDepth(7);\r\n\r\n  return title;\r\n};\r\n\r\nconst getBBcodeText = function (scene, wrapWidth, fixedWidth, fixedHeight) {\r\n  return scene.rexUI.add.BBCodeText(0, 0, '', {\r\n    fixedWidth: fixedWidth,\r\n    fixedHeight: fixedHeight,\r\n\r\n    fontSize: '20px',\r\n    color: 'black',\r\n\r\n    wrap: {\r\n      mode: 'word',\r\n      width: wrapWidth,\r\n    },\r\n    maxLines: 3,\r\n  });\r\n};\r\nconst getTitleText = function (scene, fixedWidth, fixedHeight) {\r\n  return scene.rexUI.add.BBCodeText(0, 0, '', {\r\n    fixedWidth: fixedWidth,\r\n    fixedHeight: fixedHeight,\r\n\r\n    fontSize: '14px',\r\n    color: 'black',\r\n    anchor: 'center',\r\n  });\r\n};\r\n\r\nconst endOfStory = scene => {\r\n  const camera = scene.cameras.main;\r\n\r\n  scene.tweens.add({\r\n    targets: camera,\r\n    scrollX: 200,\r\n    ease: 'Cubic', // 'Cubic', 'Elastic', 'Bounce', 'Back', Linear\r\n    duration: 1000,\r\n    repeat: 0,\r\n    yoyo: false,\r\n  });\r\n\r\n  title.destroy();\r\n};\r\n\r\nexport default Dialog;\r\n","import balconyImg from '../images/bg/balcony.jpg';\r\nimport hallImg from '../images/bg/hall.jpg';\r\nimport bedroomImg from '../images/bg/bedroom.jpg';\r\nimport body_woman_1Img from '../images/woman/body/body_1.png';\r\nimport body_woman_2Img from '../images/woman/body/body_2.png';\r\nimport hair_woman_1Img from '../images/woman/hair/hair_1.png';\r\nimport hair_woman_2Img from '../images/woman/hair/hair_2.png';\r\nimport hair_woman_1_backImg from '../images/woman/hair/hair_1_back.png';\r\nimport hair_woman_2_backImg from '../images/woman/hair/hair_2_back.png';\r\nimport clothes_woman_1Img from '../images/woman/clothes/clothes_1.png';\r\nimport clothes_woman_2Img from '../images/woman/clothes/clothes_2.png';\r\nimport face_woman_w_defaultImg from '../images/woman/emotions_white/default.png';\r\nimport face_woman_b_defaultImg from '../images/woman/emotions_black/default.png';\r\nimport arrowImg from '../images/arrow.png';\r\nimport ellipseImg from '../images/ellipse.png';\r\nimport ellipseAImg from '../images/ellipseA.png';\r\n\r\nimport Dialog from '../scenes/dialog.js';\r\nimport { game } from '../index.js';\r\nimport Person from '../services/person.js';\r\nimport { Tabs, createNextBtn, createSbmtBtn } from '../services/creators.js';\r\n\r\nconst stageNames = [['body'], ['hair', 'hair_back'], ['clothes']];\r\nconst stageTitles = ['body', 'hair', 'clothes'];\r\nconst mainHeroX = innerWidth / 2;\r\nconst mainHeroY = innerHeight / 2;\r\n\r\nexport const personConfig = [0, 0, 0, 'default'];\r\n\r\nlet stageIdx = 0;\r\nlet chooseText;\r\nlet tabs;\r\nlet person;\r\n\r\nexport const setStage = i => {\r\n  stageIdx = i;\r\n  person.idx = personConfig[stageIdx];\r\n  chooseText.text = `Choose ${stageTitles[stageIdx]}`;\r\n};\r\n\r\nclass Customization extends Phaser.Scene {\r\n  constructor() {\r\n    super({\r\n      key: 'customization',\r\n      active: true,\r\n    });\r\n  }\r\n\r\n  preload() {\r\n    this.load.image('balcony', balconyImg);\r\n    this.load.image('hall', hallImg);\r\n    this.load.image('bedroom', bedroomImg);\r\n    this.load.image('arrow', arrowImg);\r\n    this.load.image('ellipse', ellipseImg);\r\n    this.load.image('ellipseA', ellipseAImg);\r\n    this.load.image('body_woman_1', body_woman_1Img);\r\n    this.load.image('body_woman_2', body_woman_2Img);\r\n    this.load.image('hair_woman_1', hair_woman_1Img);\r\n    this.load.image('hair_woman_2', hair_woman_2Img);\r\n    this.load.image('hair_woman_1_back', hair_woman_1_backImg);\r\n    this.load.image('hair_woman_2_back', hair_woman_2_backImg);\r\n    this.load.image('clothes_woman_1', clothes_woman_1Img);\r\n    this.load.image('clothes_woman_2', clothes_woman_2Img);\r\n    this.load.image('face_woman_w_default', face_woman_w_defaultImg);\r\n    this.load.image('face_woman_b_default', face_woman_b_defaultImg);\r\n  }\r\n\r\n  create() {\r\n    const bgImg = this.add.image(0, 0, 'balcony');\r\n    const bgCoef = innerHeight / bgImg.height;\r\n    bgImg.setScale(bgCoef, bgCoef).setPosition(innerWidth / 2, innerHeight / 2);\r\n\r\n    const scaleCoef = innerHeight / 1300;\r\n\r\n    const genderW = 'woman';\r\n    person = new Person(\r\n      genderW,\r\n      personConfig,\r\n      this,\r\n      scaleCoef,\r\n      mainHeroX,\r\n      mainHeroY,\r\n    );\r\n\r\n    const arrowLeft = this.make.image({\r\n      x: person.body.x - innerWidth / 3,\r\n      y: person.body.y,\r\n      key: 'arrow',\r\n      flipX: true,\r\n    });\r\n\r\n    arrowLeft\r\n      .setInteractive()\r\n      .on('pointerdown', () => person.changeOption(stageNames, stageIdx));\r\n\r\n    const arrowRight = this.make.image({\r\n      x: person.body.x + innerWidth / 3,\r\n      y: person.body.y,\r\n      key: 'arrow',\r\n    });\r\n\r\n    arrowRight.setInteractive().on('pointerdown', () => {\r\n      person.changeOption(stageNames, stageIdx);\r\n    });\r\n\r\n    tabs = new Tabs(this);\r\n\r\n    chooseText = this.add.text(\r\n      innerWidth / 2,\r\n      545,\r\n      `Choose ${stageTitles[stageIdx]}`,\r\n      {\r\n        fontSize: '20px',\r\n        color: '#000000',\r\n      },\r\n    );\r\n    chooseText.setX(chooseText.x - chooseText.width / 2).setDepth(7);\r\n\r\n    createNextBtn(this, () => {\r\n      if (stageIdx !== stageNames.length - 1) {\r\n        personConfig[stageIdx] = person.idx;\r\n        person.idx = 0;\r\n        stageIdx += 1;\r\n        chooseText.text = `Choose ${stageTitles[stageIdx]}`;\r\n        tabs.clickBtn(stageIdx);\r\n      }\r\n    });\r\n\r\n    createSbmtBtn(this, () => {\r\n      personConfig[stageIdx] = person.idx;\r\n      game.scene.remove('customization');\r\n      game.scene.add('dialog', Dialog, true);\r\n    });\r\n  }\r\n\r\n  update() {}\r\n}\r\n\r\nexport default Customization;\r\n","import Phaser from 'phaser';\r\nimport UIPlugin from 'phaser3-rex-plugins/templates/ui/ui-plugin.js';\r\n\r\nimport Customization from './scenes/customization';\r\n\r\nconst config = {\r\n  type: Phaser.AUTO,\r\n  parent: 'root',\r\n  width: '100%',\r\n  height: '100%',\r\n  scale: {\r\n    mode: Phaser.Scale.FIT,\r\n    autoCenter: Phaser.Scale.CENTER_BOTH,\r\n  },\r\n  defaultImage: 'balcony',\r\n  scene: Customization,\r\n  plugins: {\r\n    scene: [\r\n      {\r\n        key: 'rexUI',\r\n        plugin: UIPlugin,\r\n        mapping: 'rexUI',\r\n      },\r\n    ],\r\n  },\r\n};\r\n\r\nexport const game = new Phaser.Game(config);\r\n","const hairBackArr = {\r\n  woman: ['hair_woman_1_back', 'hair_woman_2_back'],\r\n  man: ['hair_man_1_back'],\r\n};\r\nconst bodyArr = {\r\n  woman: ['body_woman_1', 'body_woman_2'],\r\n  man: ['body_man_1'],\r\n};\r\nconst hairArr = {\r\n  woman: ['hair_woman_1', 'hair_woman_2'],\r\n  man: ['hair_man_1'],\r\n};\r\nconst clothesArr = {\r\n  woman: ['clothes_woman_1', 'clothes_woman_2'],\r\n  man: ['clothes_man_1'],\r\n};\r\n\r\nconst faceColor = ['w', 'b'];\r\nimport { setStage } from '../scenes/customization.js';\r\n\r\nconst personConstructor = {\r\n  create_hair_back: (gender, idx, scene, scaleCoef, mainHeroX, mainHeroY) => {\r\n    const hair_back_Img = scene.add.image(0, 0, hairBackArr[gender][idx]);\r\n    hair_back_Img\r\n      .setScale(scaleCoef, scaleCoef)\r\n      .setPosition(mainHeroX, mainHeroY);\r\n\r\n    return hair_back_Img;\r\n  },\r\n\r\n  create_body: (gender, idx, scene, scaleCoef, mainHeroX, mainHeroY) => {\r\n    const bodyImg = scene.add.image(0, 0, bodyArr[gender][idx]);\r\n    bodyImg\r\n      .setScale(scaleCoef, scaleCoef)\r\n      .setPosition(mainHeroX, mainHeroY)\r\n      .setDepth(1);\r\n\r\n    return bodyImg;\r\n  },\r\n\r\n  create_hair: (gender, idx, scene, scaleCoef, mainHeroX, mainHeroY) => {\r\n    const hair_Img = scene.add.image(0, 0, hairArr[gender][idx]);\r\n    hair_Img\r\n      .setScale(scaleCoef, scaleCoef)\r\n      .setPosition(mainHeroX, mainHeroY)\r\n      .setDepth(3);\r\n\r\n    return hair_Img;\r\n  },\r\n\r\n  create_clothes: (gender, idx, scene, scaleCoef, mainHeroX, mainHeroY) => {\r\n    const clothes_Img = scene.add.image(0, 0, clothesArr[gender][idx]);\r\n    clothes_Img\r\n      .setScale(scaleCoef, scaleCoef)\r\n      .setPosition(mainHeroX, mainHeroY)\r\n      .setDepth(2);\r\n\r\n    return clothes_Img;\r\n  },\r\n\r\n  create_face: (\r\n    gender,\r\n    emotion,\r\n    color,\r\n    scene,\r\n    scaleCoef,\r\n    mainHeroX,\r\n    mainHeroY,\r\n  ) => {\r\n    console.log(`face_${gender}_${faceColor[color]}_${emotion}`);\r\n    const face_Img = scene.add.image(\r\n      0,\r\n      0,\r\n      `face_${gender}_${faceColor[color]}_${emotion}`,\r\n    );\r\n    face_Img\r\n      .setScale(scaleCoef, scaleCoef)\r\n      .setPosition(mainHeroX, mainHeroY)\r\n      .setDepth(2);\r\n\r\n    return face_Img;\r\n  },\r\n};\r\n\r\nclass Tabs {\r\n  constructor(scene) {\r\n    this.tabs = scene.rexUI.add\r\n      .roundRectangle(innerWidth / 2, 557, 300, 60, 10, 0xffffff)\r\n      .setAlpha(0.5)\r\n      .setDepth(5);\r\n\r\n    this.buttons = {\r\n      button0: scene.add\r\n        .image(innerWidth / 2 - 20, 520, 'ellipseA')\r\n        .setScale(0.8)\r\n        .setDepth(5)\r\n        .setInteractive()\r\n        .on('pointerdown', () => this.clickBtn(0)),\r\n\r\n      button1: scene.add\r\n        .image(innerWidth / 2, 520, 'ellipse')\r\n        .setScale(0.8)\r\n        .setDepth(5)\r\n        .setInteractive()\r\n        .on('pointerdown', () => this.clickBtn(1)),\r\n\r\n      button2: scene.add\r\n        .image(innerWidth / 2 + 20, 520, 'ellipse')\r\n        .setScale(0.8)\r\n        .setDepth(5)\r\n        .setInteractive()\r\n        .on('pointerdown', () => this.clickBtn(2)),\r\n\r\n      lastClickedIdx: 0,\r\n    };\r\n  }\r\n\r\n  clickBtn(idx) {\r\n    this.buttons[`button${this.buttons.lastClickedIdx}`].setTexture('ellipse');\r\n    this.buttons[`button${idx}`].setTexture('ellipseA');\r\n\r\n    this.buttons.lastClickedIdx = idx;\r\n    setStage(idx);\r\n  }\r\n}\r\n\r\nconst createNextBtn = (scene, callback) => {\r\n  const sbmtBtn = scene.rexUI.add\r\n    .textBox({\r\n      x: innerWidth / 2 + 100,\r\n      y: 560,\r\n\r\n      background: scene.rexUI.add\r\n        .roundRectangle(0, 0, 0, 0, 10, 0xdb5186)\r\n        .setDepth(6),\r\n\r\n      text: scene.add.text(0, 0, 'Next', { color: '#fff' }).setDepth(6),\r\n\r\n      space: {\r\n        left: 5,\r\n        right: 5,\r\n        top: 5,\r\n        bottom: 5,\r\n      },\r\n    })\r\n    .setOrigin(0)\r\n    .layout();\r\n\r\n  sbmtBtn.setInteractive().on('pointerdown', callback);\r\n\r\n  return sbmtBtn;\r\n};\r\n\r\nconst createSbmtBtn = (scene, callback) => {\r\n  const sbmtBtn = scene.rexUI.add\r\n    .textBox({\r\n      x: innerWidth / 2 - 73,\r\n      y: 610,\r\n\r\n      background: scene.rexUI.add\r\n        .roundRectangle(0, 0, 0, 0, 10, 0xdb5186)\r\n        .setDepth(6),\r\n\r\n      text: scene.add.text(0, 0, 'Confirm', { color: '#fff' }).setDepth(6),\r\n\r\n      space: {\r\n        left: 40,\r\n        right: 40,\r\n        top: 10,\r\n        bottom: 10,\r\n      },\r\n    })\r\n    .setOrigin(0)\r\n    .layout();\r\n\r\n  sbmtBtn.setInteractive().on('pointerdown', callback);\r\n\r\n  return sbmtBtn;\r\n};\r\n\r\nexport { personConstructor, Tabs, createNextBtn, createSbmtBtn };\r\n"],"sourceRoot":""}